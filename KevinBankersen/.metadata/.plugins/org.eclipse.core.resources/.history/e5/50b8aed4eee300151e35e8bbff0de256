package eu.bankersen.kevin.ql.gui.widgets;

import java.util.LinkedList;
import java.util.List;

import eu.bankersen.kevin.ql.ast.AbstractVisitor;
import eu.bankersen.kevin.ql.ast.stat.ComputedQuestion;
import eu.bankersen.kevin.ql.ast.stat.NormalQuestion;
import eu.bankersen.kevin.ql.typechecker.symboltable.Symbol;
import eu.bankersen.kevin.ql.typechecker.symboltable.SymbolTable;

public class QuestionBuilder extends AbstractVisitor {
    
    private final List<Widget> questionWidgets;
    private final SymbolTable symbolTable;
    
    public QuestionBuilder(SymbolTable symboltable) {
	this.questionWidgets = new LinkedList<>();
	this.symbolTable = symboltable;
    }

    public List<Widget> getWidgets() {
	return questionWidgets;
    }
    @Override
    public void visit(NormalQuestion o) {
	Symbol object = symbolTable.getSymbol(o.name());
	buildWidget(new Symbol(object.isComputed(), object.getName(), o.text(), object.getType(), object.getValue()));
    }

    @Override
    public void visit(ComputedQuestion o) {
	questionWidgets.add(new QuestionWidget(symbolTable.getSymbol(o.name())));	
    }
    
    private void buildWidget(Symbol symbol) {
	questionWidgets.add(new QuestionWidget(symbol));
    }
}
