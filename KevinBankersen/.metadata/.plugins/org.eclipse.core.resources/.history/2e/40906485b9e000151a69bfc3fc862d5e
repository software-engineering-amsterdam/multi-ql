package eu.bankersen.kevin.ql.util.testing;

import eu.bankersen.kevin.ql.ast.Type;

abstract class TypeTest {

    private final Type type;
    private Object value;

    TypeTest(Type type) {
	this.type = type;
    }

    public Type getType() {
	return type;
    }

    public Object getValue() {
	return value;
    }

    public boolean equalType(TypeTest type) {
	return false;
    } 

    public boolean sameType(TypeTest type) {
	return type.equals(type.getType());
    }

    // Setting the Value
    public void setValue(String value) {
	switch(type) {
	case STRING : this.value = value;
	break;
	
	case INTEGER : setIntValue(value);
	break;
	
	case BOOLEAN : setBoolValue(value);
	break;
	
	default : break;
	}
    }

    public void setValue(Integer value) {
	switch(type) {
	case STRING : setStrValue(value);
	case INTEGER : this.value = value;
	case BOOLEAN : setBoolValue(value);
	default : break;
	}
    }

    public void setValue(Boolean value) {
	switch(type) {
	case STRING : setStrValue(value);
	case INTEGER : setIntValue(value);
	case BOOLEAN : this.value = value;
	default : break;
	}
    }

    // Setting Integer Values
    private void setIntValue(String value) {

	try {
	    this.value = Integer.valueOf(value);
	} catch (NumberFormatException e) {
	    this.value = null;
	}
    }

    private void setIntValue(Boolean value) {
    }

    // Setting Boolean Values
    private void setBoolValue(String value) {
	switch (value.toLowerCase()) {
	case "true" : this.value = true;
	break;

	case "false" : this.value = false;
	break;

	default : break;
	}
    }

    private void setBoolValue(Integer value) {
    }

    // Setting String Values
    private void setStrValue(Boolean value) {
	this.value = String.valueOf(value);
    }

    private void setStrValue(Integer value) {
	this.value = String.valueOf(value);
    }

}
