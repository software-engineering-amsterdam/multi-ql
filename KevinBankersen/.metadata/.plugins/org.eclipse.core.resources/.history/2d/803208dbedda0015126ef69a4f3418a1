package eu.bankersen.kevin.ql.context;

import com.esotericsoftware.minlog.Log;

import eu.bankersen.kevin.ql.ast.form.Form;

public class ContextBuilder {

    private final Form qlForm;
    
    public ContextBuilder(Form qlForm) {
	this.qlForm = qlForm;
    }
    
    public Context buildContext() {
	
	Context context = qlForm.checkType();
	if (context.getErrors().size() > 0) {
	    context.getErrors().forEach(error -> Log.error(error.toString()));
	    Log.error("Type Check error(s), Terminating!");
	    System.exit(1);
	} else {
	    Log.info("Type Check succesful");
	}
	return context;
    }

}
