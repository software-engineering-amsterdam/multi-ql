package eu.bankersen.kevin.ql.parser;

import java.util.Arrays;

import org.antlr.v4.runtime.ANTLRInputStream;
import org.antlr.v4.runtime.CommonTokenStream;
import org.antlr.v4.runtime.tree.ParseTree;
import org.antlr.v4.runtime.tree.gui.TreeViewer;

import eu.bankersen.kevin.ql.ast.form.Form;
import eu.bankersen.kevin.ql.parser.QLParser.FileContext;

public class FormParser {

	public static void main(String[] args) {
		// Lexer
		QLLexer lexer = new QLLexer(new ANTLRInputStream("form test{bool testBool \"Some Text\" if(testBool){int Money \"test\" } if(testBool){int Money \"test\" }}\r\n"));

		// Tokens
		CommonTokenStream tokens = new CommonTokenStream(lexer);

		// Parse
		QLParser p = new QLParser(tokens);

		
		FileContext fileContext = p.file();
		
		System.out.println(fileContext.form().toString());
		
		System.out.println(fileContext.form().get(0).result);
		
		Form testForm = fileContext.form().get(0).result;
		
		System.out.println(testform.body);

		// Show UI
		TreeViewer viewr = new TreeViewer(Arrays.asList(p.getRuleNames()), fileContext);
		viewr.setScale(1.5);// scale a little
		
		viewr.open();	
	}
}
